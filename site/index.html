<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rafer – Automatiza. Inteligencia. Evolución.</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/favicon.ico" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Skip link -->
  <a href="#main-content" class="skip-link">Saltar al contenido</a>

  <!-- Cabecera -->
  <header role="banner">
    <div class="logo">
      <img src="assets/logo-192.png" alt="Logotipo de Rafer" />
    </div>
    <nav role="navigation" aria-label="Menú principal">
      <ul>
        <li><a href="#servicios">Servicios</a></li>
        <li><a href="#proyectos">Proyectos</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <!-- Contenido principal -->
  <main id="main-content" role="main">
    <!-- Sección de Servicios -->
    <!-- Sección de Proyectos -->
    <!-- Sección de Contacto -->
  </main>

  <!-- Pie de página -->
  <footer role="contentinfo">
    <p>&copy; 2025 Rafer. Todos los derechos reservados.</p>
  </footer>

  <!-- Botón de Dark Mode -->
  <button class="theme-toggle" aria-label="Cambiar tema">Modo oscuro</button>

  <!-- Registro de Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(reg => console.log('Service Worker registrado:', reg.scope))
        .catch(err => console.error('Error al registrar SW:', err));
    }
  </script>

  <!-- Script de Dark Mode Toggle -->
  <script>
    (function() {
      const html = document.documentElement;
      const btn = document.querySelector('.theme-toggle');
      const storedTheme = localStorage.getItem('theme');
      const defaultTheme = storedTheme || 
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

      // Inicializa el tema
      html.setAttribute('data-theme', defaultTheme);
      btn.textContent = defaultTheme === 'dark' ? 'Modo claro' : 'Modo oscuro';

      // Alterna y guarda la preferencia
      btn.addEventListener('click', () => {
        const newTheme = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        btn.textContent = newTheme === 'dark' ? 'Modo claro' : 'Modo oscuro';
      });
    })();
  </script>
</body>
</html>
